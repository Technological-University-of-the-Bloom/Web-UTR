---
interface Props {
  images: string[];
  id: string;
}

const { images, id }: Props = Astro.props;
const totalImages = images.length;
---

<style>
  .slider-container {
    display: flex;
    justify-content: center;
    overflow-x: hidden;
    scroll-snap-type: y mandatory;
    width: 100%;
    height: 29.621vh;
  }

  .image-wrapper {
    margin-bottom: 5.1vh;
    flex: 0 0 auto;
    width: 64.103vw;
    height: 29.621vh;
    border-radius: 20px 0px 20px 20px;
    overflow: hidden;
    scroll-snap-align: start;
  }

  .image {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .slider {
    transition: transform 0.5s ease-in-out;
  }
</style>

<div class="slider-container" id={id}>
  <div class="slider">
    {
      images.map((image) => (
        <div class="image-wrapper">
          <img src={image} alt="Slider Image" class="image" />
        </div>
      ))
    }
    {
      images.map((image) => (
        <div class="image-wrapper">
          <img src={image} alt="Slider Image" class="image" />
        </div>
      ))
    }
  </div>
</div>

<script is:inline define:vars={{ totalImages, id }}>
  const slider = document.querySelector(`#${id} .slider`);
  let index = 0;

  function slide() {
    index = (index + 1) % totalImages;
    const offset = index * -34.721;
    slider.style.transform = `translateY(${offset}vh)`;
  }

  // Set interval for automatic sliding
  setInterval(slide, 3000);
</script>
