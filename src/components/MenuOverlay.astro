---
import "../styles/MenuOverlay.css";
---

<div class="menu-overlay" id="menuOverlay" style="display: none;">
  <div class="close-button" id="closeButton">×</div>
  <div class="dropdown-link-container">
    <div>
      <h1 class="dropdown-parent">Home</h1>
      <div class="dropdown-child" style="display: none;">
        <p>Home content goes here</p>
      </div>
    </div>
    <div>
      <h1 class="dropdown-parent">About Us</h1>
      <div class="dropdown-child" style="display: none;">
        <p>Educational model</p>
        <p>Facilities</p>
        <p>Legal</p>
        <p>People operations</p>
      </div>
    </div>
    <div>
      <h1 class="dropdown-parent">Academics</h1>
      <div class="dropdown-child" style="display: none;">
        <p>Extracurriculars</p>
        <p>Student services</p>
        <p>Scholarships</p>
        <p>Internships</p>
      </div>
    </div>
    <div>
      <h1 class="dropdown-parent">Mobility</h1>
      <div class="dropdown-child" style="display: none;">
        <p>Mobility content goes here</p>
      </div>
    </div>
    <div>
      <h1 class="dropdown-parent">Services</h1>
      <div class="dropdown-child" style="display: none;">
        <p>Services content goes here</p>
      </div>
    </div>
    <div>
      <h1 class="dropdown-parent">Communication</h1>
      <div class="dropdown-child" style="display: none;">
        <p>Communication content goes here</p>
      </div>
    </div>
  </div>
</div>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const closeButton = document.getElementById("closeButton") as HTMLElement;
    const menuOverlay = document.getElementById("menuOverlay") as HTMLElement;
    const dropdownParents = document.querySelectorAll(
      ".dropdown-parent"
    ) as NodeListOf<HTMLElement>;

    // Cerrar el menú
    if (closeButton && menuOverlay) {
      closeButton.addEventListener("click", () => {
        menuOverlay.style.display = "none";
      });
    }

    dropdownParents.forEach((parent) => {
      parent.addEventListener("click", () => {
        const child = parent.nextElementSibling as HTMLElement;

        if (child && child.classList.contains("dropdown-child")) {
          // Verifica si el hijo ya está visible
          const isVisible = window.getComputedStyle(child).display === "block";

          // Si no estaba visible, ocultar todos los dropdown-child y padres
          if (!isVisible) {
            dropdownParents.forEach((otherParent) => {
              const otherChild = otherParent.nextElementSibling as HTMLElement;
              if (
                otherChild &&
                otherChild.classList.contains("dropdown-child")
              ) {
                otherParent.style.display = "none"; // Oculta el padre
                otherChild.style.display = "none"; // Oculta el hijo
              }
            });
            // Mostrar el padre clicado y su hijo correspondiente
            parent.style.display = "block"; // Asegúrate de que el padre sea visible
            child.style.display = "block"; // Muestra el hijo correspondiente
          } else {
            // Si ya estaba visible, regresar al menú original
            dropdownParents.forEach((otherParent) => {
              const otherChild = otherParent.nextElementSibling as HTMLElement;
              otherParent.style.display = "block"; // Muestra el padre
              otherChild.style.display = "none"; // Oculta el hijo
            });
          }
        }
      });
    });
  });
</script>
