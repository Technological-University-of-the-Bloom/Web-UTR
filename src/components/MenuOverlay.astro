---
import "../styles/MenuOverlay.css";
---

<div class="menu-overlay" id="menuOverlay" style="display: none;">
  <div class="close-button" id="closeButton">Ã—</div>
  <div class="dropdown-link-container">
    <div>
      <h1 class="dropdown-parent">Home</h1>
      <div class="dropdown-child"></div>
    </div>
    <div>
      <h1 class="dropdown-parent">About Us</h1>
      <div class="dropdown-child">
        Educational model
        <br />
        Facilities
        <br />
        Legal
        <br />
        People operations
      </div>
    </div>
    <div>
      <h1 class="dropdown-parent">Academics</h1>
      <div class="dropdown-child">
        Extracurriculars
        <br />
        Student services
        <br />
        Scholarships
        <br />
        Internships
      </div>
      <div>
        <h1 class="dropdown-parent">Mobility</h1>
        <div class="dropdown-child"></div>
      </div>
      <div>
        <h1 class="dropdown-parent">Services</h1>
        <div class="dropdown-child"></div>
      </div>
      <div>
        <h1 class="dropdown-parent">Communication</h1>
        <div class="dropdown-child"></div>
      </div>
    </div>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const closeButton = document.getElementById("closeButton") as HTMLElement;
      const menuOverlay = document.getElementById("menuOverlay") as HTMLElement;
      const dropdownParents = document.querySelectorAll(
        ".dropdown-parent"
      ) as NodeListOf<HTMLElement>;

      if (closeButton && menuOverlay) {
        closeButton.addEventListener("click", () => {
          menuOverlay.style.display = "none";
        });
      }

      dropdownParents.forEach((parent) => {
        parent.addEventListener("click", () => {
          const child = parent.nextElementSibling as HTMLElement;

          if (child && child.classList.contains("dropdown-child")) {
            const isVisible =
              window.getComputedStyle(child).display === "block";

            if (!isVisible) {
              dropdownParents.forEach((otherParent) => {
                const otherChild =
                  otherParent.nextElementSibling as HTMLElement;
                if (
                  otherChild &&
                  otherChild.classList.contains("dropdown-child")
                ) {
                  otherParent.style.display = "none";
                  otherChild.style.display = "none";
                }
              });

              parent.style.display = "block";
              child.style.display = "block";
            } else {
              dropdownParents.forEach((otherParent) => {
                const otherChild =
                  otherParent.nextElementSibling as HTMLElement;
                otherParent.style.display = "block";
                otherChild.style.display = "none";
              });
            }
          }
        });
      });
    });
  </script>
</div>
